/* estilos/print.scss — Impresión (index, resBuscar, anuncio, respuesta_folleto) */

@page { size: A4; margin: 12mm; }

/* Escala de grises consistente */
* { -webkit-print-color-adjust: exact; print-color-adjust: exact; }

@media print {

  /* Tipografía y colores base */
  html, body {
    background: #fff !important;
    color: #000 !important;
    font-family: Georgia, "Times New Roman", Times, serif;
    font-size: 12pt; line-height: 1.35;
    text-shadow: none !important;
  }

  h1 { font-size: 20pt; margin: 0 0 8pt; }
  h2 { font-size: 16pt; margin: 14pt 0 6pt; }
  h3 { font-size: 14pt; margin: 12pt 0 6pt; }
  p, li, dt, dd { font-size: 12pt; }

  /* Enlaces subrayados con URL visible */
  a, a:visited { color: #000 !important; text-decoration: underline; }
  a[href^="http"]:after,
  a[href^="//"]:after,
  a[href^="/"]:after { content: " (" attr(href) ")"; font-size: 10pt; word-break: break-all; }
  a[href^="#"]:after, a[href^="javascript:"]:after { content: ""; }
  a[href^="mailto:"]:after { content: " (" attr(href) ")"; font-size: 10pt; }

  /* Fechas completas si hay datetime */
  time {
    &[datetime]::after { content: " (" attr(datetime) ")"; font-size: 10pt; }
    &[data-datetime]::after { content: " (" attr(data-datetime) ")"; font-size: 10pt; }
  }

  /* Ocultar navegación y elementos interactivos */
  header {
    nav, .navPC, .navTablet, .navMovil,
    #barraRapida, #loginHover, #mostrarLogin { display: none !important; }
  }
  form, fieldset, input, select, textarea, button, label[for],
  .btn, .button, .actions, .share, .fab, .tooltip, .toast, .modal { display: none !important; }

  /* Imágenes decorativas fuera, contenido en gris */
  img {
    filter: grayscale(100%);
    max-width: 100%; height: auto;
    border: 0 !important; box-shadow: none !important;
    &[alt=""], &[alt=" "], &[role="presentation"] { display: none !important; }
  }

  /* Quitar efectos visuales */
  *, *::before, *::after {
    animation: none !important; transition: none !important;
    background-image: none !important; box-shadow: none !important; text-shadow: none !important;
    border-color: #000 !important;
  }

  /* Control de huérfanas, viudas y saltos */
  p, blockquote, ul, ol, dl { orphans: 3; widows: 3; }
  h1, h2, h3 { page-break-after: avoid; break-after: avoid-page; }
  article, section, figure, table { page-break-inside: avoid; break-inside: avoid-page; }

  /* Estructura general */
  main { margin: 0; padding: 0; background: #fff !important; border: 0 !important; }

  /* Pie de página */
  footer {
    display: block; margin-top: 8mm; padding-top: 3mm;
    border-top: 1pt solid #000; background: #fff !important; color: #000;
    > ul {
      list-style: none; margin: 0; padding: 0;
      > li { margin: 0; padding: 0; font-size: 10pt; }
    }
    a, p { font-size: 10pt; margin: 0; }
  }

  /* index.html — sección #lastUploaded */
  #lastUploaded {
    > h2 { border-bottom: 1pt solid #000; padding-bottom: 2mm; margin-bottom: 4mm; }
    > ul {
      list-style: none; margin: 0; padding: 0; column-count: 1; column-gap: 0;
      > li {
        margin: 0 0 6mm 0; padding: 0 0 6mm 0;
        border-bottom: 0.5pt solid #000;
        page-break-inside: avoid; break-inside: avoid-page;
        article {
          page-break-inside: avoid;
          figure { margin: 0 0 3mm 0; }
          img { display: block; }
          h2 { font-size: 14pt; margin: 0 0 2mm; }
          time, p { orphans: 3; widows: 3; }
          hr { border: 0; border-top: 0.5pt solid #000; }
        }
      }
    }
  }

  /* resBuscar.html — resultados de búsqueda */
  .forms { display: none !important; }
  #resultadosBuscar {
    > h2 { border-bottom: 1pt solid #000; padding-bottom: 2mm; margin-bottom: 4mm; }
    > ul {
      list-style: none; margin: 0; padding: 0; column-count: 1; column-gap: 0;
      > li {
        margin: 0 0 6mm 0; padding: 0 0 6mm 0;
        border-bottom: 0.5pt solid #000;
        page-break-inside: avoid; break-inside: avoid-page;
        article {
          page-break-inside: avoid;
          figure { margin: 0 0 3mm 0; }
          img { display: block; }
          h2 { font-size: 14pt; margin: 0 0 2mm; }
          time, p { orphans: 3; widows: 3; }
        }
      }
    }
  }

  /* anuncio.html — detalle del anuncio */
  #anuncioDetalle {
    .pill, .btn { display: none !important; }
    .anuncio-hero img { display: block; max-height: 180mm; object-fit: contain; margin: 0 0 4mm 0; }
    .anuncio-titulo { font-size: 18pt; margin: 0 0 3mm; }
    .anuncio-descripcion { margin: 0 0 4mm; }
    .meta-list {
      list-style: none; margin: 0 0 4mm 0; padding: 0; font-size: 12pt;
      > li { margin: 0 0 1.5mm; }
    }
    h3 { margin-top: 6mm; }
    .ficha {
      list-style: none; margin: 0 0 5mm 0; padding: 0; border: 0.5pt solid #000;
      > li {
        padding: 2mm 3mm; border-bottom: 0.5pt solid #000;
        &:last-child { border-bottom: 0; }
      }
    }
    .anuncio-galeria {
      display: block; margin: 4mm 0;
      figure { margin: 0 0 4mm 0; }
      img { display: block; }
      figcaption { font-size: 10pt; margin-top: 1mm; }
    }
  }

  /* respuesta_folleto.html — resumen del folleto */
  #resFolleto {
    nav { display: none !important; }
    h2, h3, h4 { margin-top: 4mm; }
    p { margin: 0 0 3mm 0; }
    table {
      width: 100%; border-collapse: collapse; margin: 2mm 0 4mm;
      th, td {
        border: 0.5pt solid #000; padding: 2mm; vertical-align: top; font-size: 11pt;
      }
      th { font-weight: bold; width: 40%; }
    }
    section, table, p { page-break-inside: avoid; break-inside: avoid-page; }
  }

  /* Mostrar URL de la página (si se define data-print-url) */
  body[data-print-url]::before {
    content: "URL: " attr(data-print-url);
    display: block; font-size: 10pt;
    margin-bottom: 4mm; padding-bottom: 2mm; border-bottom: 0.5pt solid #000;
  }

  /* Pie de página con derechos reservados */
  body::after {
    content: "© 2025 Pisos e Inmuebles — Todos los derechos reservados.";
    display: block;
    text-align: center;
    font-size: 10pt;
    margin-top: 10mm;
    padding-top: 3mm;
    border-top: 0.5pt solid #000;
  }
}
